<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 快排 quick sort

      // 原理：
      // 1 选择一个值为 pivot 基准值
      // 2 所有小于 pivot 的值，都放在左边数组
      // 3 所有大于 pivot 的值，都放在右边数组
      // 4 等于 pivot 的值可以放在左边，也可以放在右边，还可以再加一个数组，放中间数组
      // 5 不断重复以上步骤，直到所有子集只剩下一个元素为止，剩一个元素就是递归结束的条件
      // 6 拼接最终的三个数组 ( 当然每次递归都会再次分三个数组拼接 )，每个数组都是有序的数组

      const arr = [1, 5, 4, 2, 3, 9, 8, 6, 7];

      const quickSort = (arr) => {
        const len = arr.length;

        // 递归结束的条件
        if (len <= 1) return arr;

        const left = [];
        const middle = [];
        const right = [];

        const pivot = Math.floor(Math.random() * len);
        // 随机下标，注意边界
        // 获取随机下标
        // 注意这里不能是 len-1，因为边界值，Math.random是[0, 1)，右边是开区间

        for (let i = 0; i < len; i++) {
          if (arr[i] < arr[pivot]) {
            left.push(arr[i]);
          }
          if (arr[i] === arr[pivot]) {
            middle.push(arr[i]);
          }
          if (arr[i] > arr[pivot]) {
            right.push(arr[i]);
          }
        }

        return quickSort(left).concat(middle, quickSort(right)); // 递归，quickSort() 的返回值
      };

      const res = quickSort(arr);
      console.log("res: ", res);
    </script>
  </body>
</html>
