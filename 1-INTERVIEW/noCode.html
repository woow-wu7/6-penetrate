<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 前端面试题
      // 说明：
      // 1. 在不查阅文档前提下，尽可能多的完成习题。
      // 2. 答题过程请勿离开当前页面。
      // 3. 时间 60 分钟，题目任选。

      // ------
      // 题 1：
      // 写一个节流函数 (限制一个函数在一定时间内只执行一次)
      function throttle(fn, duration, ...params) {
        let isRun = true;
        return function () {
          if (!isRun) return;
          isRun = false;

          const timer = setTimeout(() => {
            fn(...params);
            isRun = true;
            clearTimeout(timer);
          }, duration);
        };
      }

      // ------
      // 题 2：
      // 数组扁平化
      // 输入：list = [1, [2, [3, 4]]]
      // 输出：[1,2,3,4]
      // 1
      const listArr = [1, [2, [3, 4]]];
      const flatFn = (arr) => {
        // 手写
        // return arr.flat(Infinity);
        return arr
          .toString()
          .split(",")
          .map((item) => Number(item));
      };
      const resList = flatFn(listArr);
      console.log("resList: ", resList);

      // ------
      // 题 3：
      // 有如下文本，请提取文本中的所有 URL
      // const text =
      //   "这是一段文本https://www.showmebug.com/pads/LKGVGT这是一段文本http://www.showmebug.com这是一段文本http://showmebug.comm这是一段文本";
      // function getAllUrl(url) {
      //   return url.match(/\w+/g);
      // }
      // const urls = getAllUrl(text);
      // console.log("urls: ", urls);

      // ------
      // 题 4：
      // 输入一个数组 nums，对于其中每个元素 nums[i]，请统计数组中比它小的所有数字的数目。
      // 以数组形式返回答案，不能用 sort 和 filter。
      // 示例 ：
      //   输入：nums = [8,1,2,2,3]
      //   输出：[4,0,1,1,3]
      const lessLen = (arr) => {
        const res = new Array(arr.length).fill(0); // 初始值是 [0,0,0,0,0]
        for (let i = 0; i < arr.length; i++) {
          for (let j = 0; j < arr.length; j++) {
            if (arr[j] < arr[i]) {
              res[i]++;
            }
          }
        }
        return res;
      };
      const lessLenArr = lessLen([8, 1, 2, 2, 3]);
      console.log("lessLenArr: ", lessLenArr);

      // ------
      // 题 5：
      // 判断一组数字是否连续
      // 当出现连续数字的时候以‘-’输出
      // 输入：[1, 2, 3, 4, 6, 8, 9, 10]
      // 输出: ["1-4", 6, "8-10"]

      // 思路：
      // 1. 找出连续开始位置
      // 2. 找出连续结束位置
      // 3. 不连续的的位置的值直接push

      const continuity = (arr) => {
        let start = 0; // 连续开始位置的值
        let res = [];
        arr.forEach((item, index) => {
          // 连续开始位置，比如 68910 中 8
          if (item + 1 === arr[index + 1] && item - 1 !== arr[index - 1]) {
            start = item;
          }
          // 连续结束为止，比如 3468 中的 4
          else if (item - 1 === arr[index - 1] && item + 1 != arr[index + 1]) {
            res.push(`${start}-${item}`);
          }
          // 不相连的元素，即数组该元素前后的值，和 +1 -1 不相等
          else if (item - 1 !== arr[index - 1] && item + 1 != arr[index + 1]) {
            res.push(item);
          }
        });

        return res;
      };
      const continuityArr = continuity([1, 2, 3, 4, 6, 8, 9, 10]);
      console.log("continuityArr: ", continuityArr);
    </script>
  </body>
</html>
